<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fundamentos - Bases de Datos</title>

    <!-- Sidebar Styles -->
    <link rel="stylesheet" href="/sidebar-styles.css">

    <!-- TOC (Table of Contents) Styles -->
    <link rel="stylesheet" href="/toc-styles.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0f0f0f;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
            margin-left: 280px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #00758f 0%, #9b59b6 50%, #e67e22 100%);
            border-radius: 12px;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .breadcrumb {
            margin-bottom: 30px;
            padding: 15px;
            background: #1a1a1a;
            border-radius: 8px;
            border-left: 4px solid #00758f;
        }

        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .section {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .section h2 {
            color: #00758f;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #2a2a2a;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #9b59b6;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .intro {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 20px;
            padding: 20px;
            background: #151515;
            border-radius: 8px;
            border-left: 4px solid #00758f;
        }

        .highlight-box {
            background: #1f1f1f;
            border: 2px solid #00758f;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: #00758f;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .db-card {
            background: #151515;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }

        .db-card:hover {
            border-color: #00758f;
            transform: translateX(10px);
        }

        .db-card h4 {
            color: #00758f;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .db-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            margin: 5px 5px 10px 0;
            font-weight: bold;
        }

        .db-tag.sql { background: #00758f; color: #fff; }
        .db-tag.nosql { background: #2ecc71; color: #fff; }
        .db-tag.postgres { background: #336791; color: #fff; }
        .db-tag.mysql { background: #4479a1; color: #fff; }
        .db-tag.mongodb { background: #47a248; color: #fff; }
        .db-tag.redis { background: #dc382d; color: #fff; }

        .diagram {
            background: #151515;
            border: 2px solid #2a2a2a;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .diagram pre {
            color: #e0e0e0;
            line-height: 1.8;
        }

        .workflow-step {
            background: #151515;
            border-left: 4px solid #00758f;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .workflow-step::before {
            content: attr(data-step);
            position: absolute;
            left: -15px;
            top: 15px;
            background: #00758f;
            color: #fff;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .workflow-step h4 {
            color: #9b59b6;
            margin-bottom: 10px;
            margin-left: 25px;
        }

        .workflow-step p, .workflow-step ul {
            margin-left: 25px;
        }

        .code-example {
            background: #0a0a0a;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .code-example .code-header {
            color: #00758f;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .code-example code {
            color: #e0e0e0;
            display: block;
            line-height: 1.6;
        }

        .code-example .comment { color: #7f8c8d; }
        .code-example .keyword { color: #f1c40f; }
        .code-example .string { color: #2ecc71; }
        .code-example .number { color: #e67e22; }
        .code-example .operator { color: #9b59b6; }

        ul, ol {
            margin-left: 20px;
            margin-top: 10px;
        }

        li {
            margin: 8px 0;
        }

        .tip {
            background: #1a1a0f;
            border-left: 4px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .tip strong {
            color: #f39c12;
        }

        .best-practice {
            background: #0f1a0f;
            border-left: 4px solid #2ecc71;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .best-practice strong {
            color: #2ecc71;
        }

        .warning {
            background: #1a0f0f;
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning strong {
            color: #e74c3c;
        }

        .comparison-table {
            background: #151515;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th {
            background: #00758f;
            color: #fff;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid #2a2a2a;
        }

        .comparison-table tr:hover {
            background: #1a1a1a;
        }

        .resources {
            background: #0f1a1a;
            border: 1px solid #2a3a3a;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .resources h3 {
            color: #3498db;
            margin-bottom: 15px;
        }

        .resources a {
            color: #3498db;
            text-decoration: none;
        }

        .resources a:hover {
            text-decoration: underline;
        }

        .back-button {
            display: inline-block;
            background: #00758f;
            color: #fff;
            padding: 12px 30px;
            border-radius: 8px;
            text-decoration: none;
            margin: 20px 0;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .back-button:hover {
            background: #005a6f;
            transform: translateY(-2px);
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            body {
                margin-left: 0;
            }

            header h1 {
                font-size: 1.8em;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’¾ Fundamentos de Bases de Datos</h1>
            <p class="subtitle">El almacÃ©n permanente: Donde viven los datos de tu aplicaciÃ³n</p>
        </header>

        <div class="breadcrumb">
            <a href="../../index.html">â† Inicio</a> /
            <a href="../index.html">Fundamentos</a> /
            <span>Base de Datos</span>
        </div>

        <div class="section">
            <h2>Â¿QuÃ© es una Base de Datos?</h2>

            <div class="intro">
                Una <strong>Base de Datos</strong> es un sistema organizado para almacenar, gestionar y recuperar datos de forma permanente y eficiente. Es la <strong>memoria a largo plazo</strong> de tu aplicaciÃ³n - donde se guardan usuarios, posts, transacciones, configuraciones, y cualquier dato que necesite persistir.
            </div>

            <div class="highlight-box">
                <h4>DefiniciÃ³n Simple:</h4>
                <p>Si tu aplicaciÃ³n necesita recordar algo despuÃ©s de cerrarse o reiniciarse â†’ Necesitas una <strong>Base de Datos</strong></p>
                <ul>
                    <li>âœ… Usuarios registrados (nombre, email, password)</li>
                    <li>âœ… Posts, comentarios, likes en redes sociales</li>
                    <li>âœ… Productos, inventario, Ã³rdenes en e-commerce</li>
                    <li>âœ… Transacciones bancarias</li>
                    <li>âœ… Historial de navegaciÃ³n, preferencias</li>
                    <li>âœ… Cualquier dato que deba sobrevivir al apagado del servidor</li>
                </ul>
            </div>

            <div class="tip">
                <strong>ğŸ’¡ AnalogÃ­a de la Biblioteca:</strong>
                <br>â€¢ <strong>Base de Datos</strong> = Toda la biblioteca con sus estantes, catÃ¡logos y organizaciÃ³n
                <br>â€¢ <strong>Tablas/Colecciones</strong> = Estantes especÃ­ficos (Novelas, Ciencia, Historia)
                <br>â€¢ <strong>Registros/Documentos</strong> = Libros individuales
                <br>â€¢ <strong>Campos/Propiedades</strong> = InformaciÃ³n del libro (tÃ­tulo, autor, aÃ±o, ISBN)
                <br>â€¢ <strong>Queries/Consultas</strong> = Preguntar al bibliotecario "Dame todos los libros de GarcÃ­a MÃ¡rquez publicados despuÃ©s de 1980"
                <br>â€¢ <strong>Ãndices</strong> = El catÃ¡logo que hace bÃºsquedas mÃ¡s rÃ¡pidas
            </div>
        </div>

        <div class="section">
            <h2>Â¿Por quÃ© NO usar archivos simples?</h2>

            <div class="db-card">
                <h4>Problemas de guardar datos en archivos .txt o .json:</h4>
                <ul>
                    <li><strong>âŒ Concurrencia:</strong> Â¿QuÃ© pasa si 100 usuarios intentan escribir al mismo tiempo? Se corromperÃ­a el archivo</li>
                    <li><strong>âŒ BÃºsquedas lentas:</strong> Encontrar "usuarios con edad > 25" requiere leer TODO el archivo</li>
                    <li><strong>âŒ Integridad:</strong> No hay garantÃ­a de que los datos sean vÃ¡lidos (edad = "abc")</li>
                    <li><strong>âŒ Relaciones:</strong> Â¿CÃ³mo conectas un post con su autor de forma eficiente?</li>
                    <li><strong>âŒ Escalabilidad:</strong> Â¿QuÃ© pasa cuando tienes 10 millones de registros?</li>
                    <li><strong>âŒ Transacciones:</strong> Â¿CÃ³mo garantizas que una transferencia bancaria sea atÃ³mica (todo o nada)?</li>
                    <li><strong>âŒ Seguridad:</strong> No hay control de acceso ni encriptaciÃ³n nativa</li>
                </ul>
            </div>

            <div class="highlight-box">
                <h4>Ventajas de usar Bases de Datos:</h4>
                <ul>
                    <li><strong>âœ… Concurrencia:</strong> Miles de usuarios accediendo simultÃ¡neamente sin problemas</li>
                    <li><strong>âœ… Ãndices:</strong> BÃºsquedas ultra rÃ¡pidas incluso con millones de registros</li>
                    <li><strong>âœ… ValidaciÃ³n:</strong> Esquemas que garantizan tipos de datos correctos</li>
                    <li><strong>âœ… Relaciones:</strong> Conectar datos de forma eficiente (usuarios â†’ posts â†’ comentarios)</li>
                    <li><strong>âœ… ACID:</strong> Transacciones atÃ³micas (todo se ejecuta o nada)</li>
                    <li><strong>âœ… Backup y Recovery:</strong> Herramientas para respaldar y restaurar datos</li>
                    <li><strong>âœ… Seguridad:</strong> Permisos, roles, encriptaciÃ³n</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>SQL vs NoSQL: Las Dos Grandes Familias</h2>

            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>Aspecto</th>
                            <th>SQL (Relacional)</th>
                            <th>NoSQL (No Relacional)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Estructura</strong></td>
                            <td>Tablas con filas y columnas</td>
                            <td>Documentos, key-value, grafos, columnas</td>
                        </tr>
                        <tr>
                            <td><strong>Esquema</strong></td>
                            <td>RÃ­gido, definido previamente</td>
                            <td>Flexible, puede variar</td>
                        </tr>
                        <tr>
                            <td><strong>Relaciones</strong></td>
                            <td>JOINs entre tablas</td>
                            <td>Datos embebidos o referencias</td>
                        </tr>
                        <tr>
                            <td><strong>Escalabilidad</strong></td>
                            <td>Vertical (mÃ¡s RAM/CPU al servidor)</td>
                            <td>Horizontal (mÃ¡s servidores)</td>
                        </tr>
                        <tr>
                            <td><strong>Transacciones</strong></td>
                            <td>ACID (Atomicidad, Consistencia, Aislamiento, Durabilidad)</td>
                            <td>BASE (Basically Available, Soft state, Eventually consistent)</td>
                        </tr>
                        <tr>
                            <td><strong>Mejor para</strong></td>
                            <td>Datos estructurados, relaciones complejas, transacciones</td>
                            <td>Datos semi-estructurados, flexibilidad, escala masiva</td>
                        </tr>
                        <tr>
                            <td><strong>Ejemplos</strong></td>
                            <td>PostgreSQL, MySQL, SQL Server, Oracle</td>
                            <td>MongoDB, Redis, Cassandra, Neo4j</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="tip">
                <strong>ğŸ’¡ Â¿CuÃ¡l elegir?</strong>
                <br><br><strong>Usa SQL cuando:</strong>
                <br>â€¢ Tienes datos estructurados con relaciones claras (usuarios â†’ Ã³rdenes â†’ productos)
                <br>â€¢ Necesitas transacciones ACID (banking, e-commerce)
                <br>â€¢ Queries complejas con JOINs
                <br>â€¢ Integridad de datos es crÃ­tica
                <br><br><strong>Usa NoSQL cuando:</strong>
                <br>â€¢ Datos flexibles o no estructurados (logs, documentos JSON)
                <br>â€¢ Necesitas escalar horizontalmente a millones de usuarios
                <br>â€¢ Velocidad de escritura masiva (analytics, IoT)
                <br>â€¢ Prototipado rÃ¡pido sin esquema fijo
            </div>
        </div>

        <div class="section">
            <h2>SQL: Bases de Datos Relacionales</h2>

            <h3>Concepto Fundamental: Tablas</h3>

            <div class="diagram">
                <pre>
TABLA: users
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚   nombre    â”‚         email          â”‚  password   â”‚ edad â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ Juan PÃ©rez  â”‚ juan@example.com       â”‚ $2b$10$...  â”‚  28  â”‚
â”‚ 2  â”‚ MarÃ­a LÃ³pez â”‚ maria@example.com      â”‚ $2b$10$...  â”‚  32  â”‚
â”‚ 3  â”‚ Carlos Ruiz â”‚ carlos@example.com     â”‚ $2b$10$...  â”‚  25  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
       â†‘              â†‘                        â†‘              â†‘
    Primary Key    VARCHAR                  VARCHAR       INTEGER
    (Ãšnico)        (String)                (Hasheado)    (NÃºmero)


TABLA: posts
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚     titulo       â”‚        contenido           â”‚ user_id  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ Mi primer post   â”‚ Hola mundo!                â”‚    1     â”‚
â”‚ 2  â”‚ Aprendiendo SQL  â”‚ Las bases de datos...      â”‚    1     â”‚
â”‚ 3  â”‚ Tutorial CSS     â”‚ Los selectores...          â”‚    2     â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                           â†‘
                                                      Foreign Key
                                                    (Referencia a users.id)


RELACIÃ“N: Un usuario (user_id=1) tiene mÃºltiples posts (id=1, id=2)
                </pre>
            </div>

            <div class="db-card">
                <h4>Conceptos Clave de SQL:</h4>

                <p><strong>1. Primary Key (Clave Primaria):</strong></p>
                <p>Identificador Ãºnico de cada registro. Usualmente un ID autoincremental o UUID.</p>
                <div class="code-example">
                    <code>id INTEGER PRIMARY KEY AUTOINCREMENT</code>
                </div>

                <p><strong>2. Foreign Key (Clave ForÃ¡nea):</strong></p>
                <p>Campo que referencia la Primary Key de otra tabla. Crea relaciones.</p>
                <div class="code-example">
                    <code>user_id INTEGER REFERENCES users(id)</code>
                </div>

                <p><strong>3. Tipos de Datos Comunes:</strong></p>
                <ul>
                    <li><code>INTEGER</code> / <code>BIGINT</code> - NÃºmeros enteros</li>
                    <li><code>DECIMAL(10,2)</code> / <code>NUMERIC</code> - NÃºmeros con decimales (precios)</li>
                    <li><code>VARCHAR(255)</code> - Texto de longitud variable</li>
                    <li><code>TEXT</code> - Texto largo sin lÃ­mite</li>
                    <li><code>BOOLEAN</code> - Verdadero/Falso</li>
                    <li><code>DATE</code> / <code>TIMESTAMP</code> - Fechas y tiempos</li>
                    <li><code>JSON</code> / <code>JSONB</code> - Datos JSON (PostgreSQL)</li>
                </ul>

                <p><strong>4. Constraints (Restricciones):</strong></p>
                <ul>
                    <li><code>NOT NULL</code> - Campo obligatorio</li>
                    <li><code>UNIQUE</code> - No puede haber duplicados (emails)</li>
                    <li><code>DEFAULT</code> - Valor por defecto</li>
                    <li><code>CHECK</code> - ValidaciÃ³n personalizada (edad > 0)</li>
                </ul>
            </div>

            <h3>Operaciones CRUD en SQL</h3>

            <div class="workflow-step" data-step="1">
                <h4>CREATE - Crear tabla y datos</h4>

                <div class="code-example">
                    <div class="code-header">Crear tabla</div>
                    <code>
<span class="keyword">CREATE TABLE</span> users (
    id <span class="keyword">INTEGER PRIMARY KEY AUTOINCREMENT</span>,
    nombre <span class="keyword">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT NULL</span>,
    email <span class="keyword">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL UNIQUE</span>,
    password <span class="keyword">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,
    edad <span class="keyword">INTEGER CHECK</span>(edad >= <span class="number">0</span>),
    created_at <span class="keyword">TIMESTAMP DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>
);
                    </code>
                </div>

                <div class="code-example">
                    <div class="code-header">Insertar datos (INSERT)</div>
                    <code>
<span class="comment">-- Insertar un usuario</span>
<span class="keyword">INSERT INTO</span> users (nombre, email, password, edad)
<span class="keyword">VALUES</span> (<span class="string">'Juan PÃ©rez'</span>, <span class="string">'juan@example.com'</span>, <span class="string">'$2b$10$...'</span>, <span class="number">28</span>);

<span class="comment">-- Insertar mÃºltiples usuarios</span>
<span class="keyword">INSERT INTO</span> users (nombre, email, password, edad)
<span class="keyword">VALUES</span>
    (<span class="string">'MarÃ­a LÃ³pez'</span>, <span class="string">'maria@example.com'</span>, <span class="string">'$2b$10$...'</span>, <span class="number">32</span>),
    (<span class="string">'Carlos Ruiz'</span>, <span class="string">'carlos@example.com'</span>, <span class="string">'$2b$10$...'</span>, <span class="number">25</span>);
                    </code>
                </div>
            </div>

            <div class="workflow-step" data-step="2">
                <h4>READ - Consultar datos (SELECT)</h4>

                <div class="code-example">
                    <code>
<span class="comment">-- Obtener TODOS los usuarios</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users;

<span class="comment">-- Obtener columnas especÃ­ficas</span>
<span class="keyword">SELECT</span> nombre, email <span class="keyword">FROM</span> users;

<span class="comment">-- Filtrar con WHERE</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users
<span class="keyword">WHERE</span> edad > <span class="number">25</span>;

<span class="comment">-- MÃºltiples condiciones</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users
<span class="keyword">WHERE</span> edad >= <span class="number">25</span> <span class="keyword">AND</span> edad <= <span class="number">35</span>;

<span class="comment">-- Buscar por texto</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users
<span class="keyword">WHERE</span> nombre <span class="keyword">LIKE</span> <span class="string">'%Juan%'</span>;

<span class="comment">-- Ordenar resultados</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users
<span class="keyword">ORDER BY</span> edad <span class="keyword">DESC</span>;

<span class="comment">-- Limitar resultados</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users
<span class="keyword">LIMIT</span> <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">20</span>; <span class="comment">-- PaginaciÃ³n</span>

<span class="comment">-- Contar registros</span>
<span class="keyword">SELECT COUNT</span>(*) <span class="keyword">FROM</span> users;

<span class="comment">-- Agregaciones</span>
<span class="keyword">SELECT AVG</span>(edad) <span class="keyword">AS</span> edad_promedio <span class="keyword">FROM</span> users;
<span class="keyword">SELECT MAX</span>(edad) <span class="keyword">AS</span> edad_maxima <span class="keyword">FROM</span> users;
                    </code>
                </div>
            </div>

            <div class="workflow-step" data-step="3">
                <h4>UPDATE - Actualizar datos</h4>

                <div class="code-example">
                    <code>
<span class="comment">-- Actualizar un usuario especÃ­fico</span>
<span class="keyword">UPDATE</span> users
<span class="keyword">SET</span> edad = <span class="number">29</span>
<span class="keyword">WHERE</span> id = <span class="number">1</span>;

<span class="comment">-- Actualizar mÃºltiples campos</span>
<span class="keyword">UPDATE</span> users
<span class="keyword">SET</span> nombre = <span class="string">'Juan Carlos PÃ©rez'</span>,
    edad = <span class="number">29</span>
<span class="keyword">WHERE</span> id = <span class="number">1</span>;

<span class="comment">-- Actualizar basado en condiciÃ³n</span>
<span class="keyword">UPDATE</span> users
<span class="keyword">SET</span> edad = edad + <span class="number">1</span>
<span class="keyword">WHERE</span> created_at < <span class="string">'2024-01-01'</span>;
                    </code>
                </div>

                <div class="warning">
                    <strong>âš ï¸ PELIGRO:</strong> NUNCA olvides el <code>WHERE</code> en UPDATE o DELETE. Sin WHERE, modificarÃ¡s/eliminarÃ¡s TODOS los registros.
                </div>
            </div>

            <div class="workflow-step" data-step="4">
                <h4>DELETE - Eliminar datos</h4>

                <div class="code-example">
                    <code>
<span class="comment">-- Eliminar un usuario especÃ­fico</span>
<span class="keyword">DELETE FROM</span> users
<span class="keyword">WHERE</span> id = <span class="number">3</span>;

<span class="comment">-- Eliminar basado en condiciÃ³n</span>
<span class="keyword">DELETE FROM</span> users
<span class="keyword">WHERE</span> created_at < <span class="string">'2020-01-01'</span>;

<span class="comment">-- âš ï¸ ELIMINAR TODO (PELIGROSO)</span>
<span class="keyword">DELETE FROM</span> users; <span class="comment">-- Â¡Sin WHERE elimina TODO!</span>
                    </code>
                </div>
            </div>

            <h3>JOINs: Relacionar Tablas</h3>

            <div class="diagram">
                <pre>
INNER JOIN: Solo registros que coinciden en ambas tablas

users:                      posts:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ nombre â”‚            â”‚ id â”‚  titulo  â”‚ user_id â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ Juan   â”‚            â”‚ 1  â”‚ Post A   â”‚    1    â”‚
â”‚ 2  â”‚ MarÃ­a  â”‚            â”‚ 2  â”‚ Post B   â”‚    1    â”‚
â”‚ 3  â”‚ Carlos â”‚            â”‚ 3  â”‚ Post C   â”‚    2    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SELECT users.nombre, posts.titulo
FROM users
INNER JOIN posts ON users.id = posts.user_id;

Resultado:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ nombre â”‚  titulo  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Juan   â”‚ Post A   â”‚
â”‚ Juan   â”‚ Post B   â”‚
â”‚ MarÃ­a  â”‚ Post C   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(Carlos no aparece porque no tiene posts)
                </pre>
            </div>

            <div class="code-example">
                <div class="code-header">Ejemplos de JOINs</div>
                <code>
<span class="comment">-- INNER JOIN: Solo coincidencias</span>
<span class="keyword">SELECT</span> users.nombre, posts.titulo
<span class="keyword">FROM</span> users
<span class="keyword">INNER JOIN</span> posts <span class="keyword">ON</span> users.id = posts.user_id;

<span class="comment">-- LEFT JOIN: Todos de la izquierda (users), aunque no tengan posts</span>
<span class="keyword">SELECT</span> users.nombre, <span class="keyword">COUNT</span>(posts.id) <span class="keyword">AS</span> num_posts
<span class="keyword">FROM</span> users
<span class="keyword">LEFT JOIN</span> posts <span class="keyword">ON</span> users.id = posts.user_id
<span class="keyword">GROUP BY</span> users.id;

<span class="comment">-- Multiple JOINs: users â†’ posts â†’ comments</span>
<span class="keyword">SELECT</span>
    users.nombre,
    posts.titulo,
    comments.contenido
<span class="keyword">FROM</span> users
<span class="keyword">INNER JOIN</span> posts <span class="keyword">ON</span> users.id = posts.user_id
<span class="keyword">INNER JOIN</span> comments <span class="keyword">ON</span> posts.id = comments.post_id;
                </code>
            </div>

            <h3>Ãndices: Acelerar BÃºsquedas</h3>

            <div class="db-card">
                <h4>Â¿QuÃ© son los Ã­ndices?</h4>
                <p>Estructuras de datos que permiten bÃºsquedas ultra rÃ¡pidas, como el Ã­ndice de un libro.</p>

                <p><strong>Sin Ã­ndice:</strong> La base de datos lee TODOS los registros (lento con millones de filas)</p>
                <p><strong>Con Ã­ndice:</strong> BÃºsqueda logarÃ­tmica - encuentra datos instantÃ¡neamente</p>

                <div class="code-example">
                    <code>
<span class="comment">-- Crear Ã­ndice en email (usado frecuentemente en bÃºsquedas)</span>
<span class="keyword">CREATE INDEX</span> idx_users_email <span class="keyword">ON</span> users(email);

<span class="comment">-- Ãndice compuesto (mÃºltiples columnas)</span>
<span class="keyword">CREATE INDEX</span> idx_users_age_name <span class="keyword">ON</span> users(edad, nombre);

<span class="comment">-- Ahora bÃºsquedas por email son INSTANTÃNEAS incluso con millones de usuarios</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> email = <span class="string">'juan@example.com'</span>;
                    </code>
                </div>

                <div class="tip">
                    <strong>ğŸ’¡ CuÃ¡ndo crear Ã­ndices:</strong>
                    <br>â€¢ Columnas usadas frecuentemente en WHERE
                    <br>â€¢ Foreign Keys
                    <br>â€¢ Columnas usadas en ORDER BY
                    <br>â€¢ Pero NO en todas: Ã­ndices consumen espacio y ralentizan INSERT/UPDATE
                </div>
            </div>
        </div>

        <div class="section">
            <h2>NoSQL: MongoDB (Document Database)</h2>

            <div class="intro">
                MongoDB almacena datos en <strong>documentos JSON-like (BSON)</strong> en lugar de tablas. Es flexible - cada documento puede tener estructura diferente.
            </div>

            <div class="diagram">
                <pre>
COLECCIÃ“N: users (equivalente a tabla SQL)

Documento 1:
{
  "_id": ObjectId("507f1f77bcf86cd799439011"),
  "nombre": "Juan PÃ©rez",
  "email": "juan@example.com",
  "edad": 28,
  "direccion": {
    "calle": "Av. Principal 123",
    "ciudad": "Madrid",
    "codigo_postal": "28001"
  },
  "hobbies": ["programaciÃ³n", "mÃºsica", "deportes"],
  "created_at": ISODate("2025-01-15T10:30:00Z")
}

Documento 2:
{
  "_id": ObjectId("507f1f77bcf86cd799439012"),
  "nombre": "MarÃ­a LÃ³pez",
  "email": "maria@example.com",
  "edad": 32,
  "empresa": "Tech Corp",        â† Campo que Documento 1 no tiene
  "skills": ["JavaScript", "Python", "SQL"],
  "certificaciones": [
    { "nombre": "AWS Certified", "aÃ±o": 2024 },
    { "nombre": "MongoDB Associate", "aÃ±o": 2023 }
  ]
}

Nota: Cada documento puede tener diferentes campos (flexible)
                </pre>
            </div>

            <h3>Operaciones en MongoDB</h3>

            <div class="workflow-step" data-step="1">
                <h4>CREATE - Insertar documentos</h4>

                <div class="code-example">
                    <div class="code-header">JavaScript (usando MongoDB driver)</div>
                    <code>
<span class="comment">// Insertar un documento</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">insertOne</span>({
    nombre: <span class="string">'Juan PÃ©rez'</span>,
    email: <span class="string">'juan@example.com'</span>,
    edad: <span class="number">28</span>,
    hobbies: [<span class="string">'programaciÃ³n'</span>, <span class="string">'mÃºsica'</span>],
    direccion: {
        ciudad: <span class="string">'Madrid'</span>,
        pais: <span class="string">'EspaÃ±a'</span>
    }
});

<span class="comment">// Insertar mÃºltiples documentos</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">insertMany</span>([
    { nombre: <span class="string">'MarÃ­a'</span>, edad: <span class="number">32</span> },
    { nombre: <span class="string">'Carlos'</span>, edad: <span class="number">25</span> }
]);
                    </code>
                </div>
            </div>

            <div class="workflow-step" data-step="2">
                <h4>READ - Consultar documentos</h4>

                <div class="code-example">
                    <code>
<span class="comment">// Obtener todos los documentos</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">find</span>().<span class="function">toArray</span>();

<span class="comment">// Filtrar documentos</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">find</span>({ edad: { $gt: <span class="number">25</span> } }).<span class="function">toArray</span>();

<span class="comment">// BÃºsqueda por mÃºltiples condiciones</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">find</span>({
    edad: { $gte: <span class="number">25</span>, $lte: <span class="number">35</span> },
    <span class="string">'direccion.ciudad'</span>: <span class="string">'Madrid'</span>
}).<span class="function">toArray</span>();

<span class="comment">// BÃºsqueda en arrays</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">find</span>({
    hobbies: { $in: [<span class="string">'programaciÃ³n'</span>] }
}).<span class="function">toArray</span>();

<span class="comment">// ProyecciÃ³n (seleccionar campos especÃ­ficos)</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">find</span>(
    { edad: { $gt: <span class="number">25</span> } },
    { projection: { nombre: <span class="number">1</span>, email: <span class="number">1</span>, _id: <span class="number">0</span> } }
).<span class="function">toArray</span>();

<span class="comment">// Ordenar y limitar</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>)
    .<span class="function">find</span>()
    .<span class="function">sort</span>({ edad: <span class="number">-1</span> })  <span class="comment">// -1 = descendente</span>
    .<span class="function">limit</span>(<span class="number">10</span>)
    .<span class="function">toArray</span>();
                    </code>
                </div>
            </div>

            <div class="workflow-step" data-step="3">
                <h4>UPDATE - Actualizar documentos</h4>

                <div class="code-example">
                    <code>
<span class="comment">// Actualizar un documento</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">updateOne</span>(
    { email: <span class="string">'juan@example.com'</span> },
    { $set: { edad: <span class="number">29</span> } }
);

<span class="comment">// Actualizar mÃºltiples campos</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">updateOne</span>(
    { _id: userId },
    {
        $set: { nombre: <span class="string">'Juan Carlos'</span> },
        $inc: { edad: <span class="number">1</span> },  <span class="comment">// Incrementar</span>
        $push: { hobbies: <span class="string">'lectura'</span> }  <span class="comment">// Agregar a array</span>
    }
);

<span class="comment">// Actualizar o crear (upsert)</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">updateOne</span>(
    { email: <span class="string">'nuevo@example.com'</span> },
    { $set: { nombre: <span class="string">'Nuevo Usuario'</span> } },
    { upsert: <span class="keyword">true</span> }
);
                    </code>
                </div>
            </div>

            <div class="workflow-step" data-step="4">
                <h4>DELETE - Eliminar documentos</h4>

                <div class="code-example">
                    <code>
<span class="comment">// Eliminar un documento</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">deleteOne</span>({ _id: userId });

<span class="comment">// Eliminar mÃºltiples documentos</span>
<span class="keyword">await</span> db.collection(<span class="string">'users'</span>).<span class="function">deleteMany</span>({ edad: { $lt: <span class="number">18</span> } });
                    </code>
                </div>
            </div>

            <h3>Relaciones en MongoDB</h3>

            <div class="db-card">
                <h4>OpciÃ³n 1: Documentos Embebidos (Recommended para 1-a-pocos)</h4>

                <div class="code-example">
                    <code>
<span class="comment">// Usuario con posts embebidos</span>
{
    _id: ObjectId(<span class="string">"..."</span>),
    nombre: <span class="string">"Juan"</span>,
    email: <span class="string">"juan@example.com"</span>,
    posts: [
        {
            titulo: <span class="string">"Mi primer post"</span>,
            contenido: <span class="string">"Hola mundo"</span>,
            fecha: ISODate(<span class="string">"2025-01-15"</span>)
        },
        {
            titulo: <span class="string">"Segundo post"</span>,
            contenido: <span class="string">"Aprendiendo MongoDB"</span>,
            fecha: ISODate(<span class="string">"2025-01-16"</span>)
        }
    ]
}
                    </code>
                </div>

                <p><strong>âœ… Ventajas:</strong> Una sola query obtiene todo, rÃ¡pido</p>
                <p><strong>âŒ Desventajas:</strong> Si hay MUCHOS posts, documento muy grande</p>
            </div>

            <div class="db-card">
                <h4>OpciÃ³n 2: Referencias (Recommended para 1-a-muchos)</h4>

                <div class="code-example">
                    <code>
<span class="comment">// ColecciÃ³n: users</span>
{
    _id: ObjectId(<span class="string">"507f1f77bcf86cd799439011"</span>),
    nombre: <span class="string">"Juan"</span>,
    email: <span class="string">"juan@example.com"</span>
}

<span class="comment">// ColecciÃ³n: posts</span>
{
    _id: ObjectId(<span class="string">"..."</span>),
    titulo: <span class="string">"Mi primer post"</span>,
    contenido: <span class="string">"Hola mundo"</span>,
    user_id: ObjectId(<span class="string">"507f1f77bcf86cd799439011"</span>)  <span class="comment">â† Referencia</span>
}

<span class="comment">// Obtener usuario con sus posts (populate)</span>
<span class="keyword">const</span> user = <span class="keyword">await</span> User.<span class="function">findById</span>(userId).<span class="function">populate</span>(<span class="string">'posts'</span>);
                    </code>
                </div>

                <p><strong>âœ… Ventajas:</strong> Escalable, documentos separados</p>
                <p><strong>âŒ Desventajas:</strong> Requiere mÃºltiples queries o aggregation</p>
            </div>
        </div>

        <div class="section">
            <h2>Bases de Datos Populares</h2>

            <div class="grid-2">
                <div class="db-card">
                    <span class="db-tag postgres">PostgreSQL</span>
                    <h4>SQL: La mÃ¡s Completa y Robusta</h4>
                    <p><strong>Tipo:</strong> SQL Relacional</p>
                    <p><strong>Ventajas:</strong></p>
                    <ul>
                        <li>Open source, gratis, muy confiable</li>
                        <li>Soporta JSON, full-text search, geoespacial</li>
                        <li>Transacciones ACID perfectas</li>
                        <li>Performance excelente</li>
                        <li>Extensiones poderosas (PostGIS, pgvector)</li>
                    </ul>
                    <p><strong>Ideal para:</strong> Aplicaciones serias, startups, e-commerce, analytics</p>
                    <p><strong>Usado por:</strong> Instagram, Spotify, Twitch, Reddit</p>
                </div>

                <div class="db-card">
                    <span class="db-tag mysql">MySQL</span>
                    <h4>SQL: El ClÃ¡sico Popular</h4>
                    <p><strong>Tipo:</strong> SQL Relacional</p>
                    <p><strong>Ventajas:</strong></p>
                    <ul>
                        <li>Muy popular, gran comunidad</li>
                        <li>FÃ¡cil de aprender</li>
                        <li>RÃ¡pido para lectura</li>
                        <li>Hosting barato disponible</li>
                    </ul>
                    <p><strong>Ideal para:</strong> Sitios web tradicionales, WordPress, proyectos pequeÃ±os/medianos</p>
                    <p><strong>Usado por:</strong> Facebook, Twitter (antes), YouTube</p>
                </div>

                <div class="db-card">
                    <span class="db-tag mongodb">MongoDB</span>
                    <h4>NoSQL: Document Database LÃ­der</h4>
                    <p><strong>Tipo:</strong> NoSQL Documentos (JSON)</p>
                    <p><strong>Ventajas:</strong></p>
                    <ul>
                        <li>Esquema flexible</li>
                        <li>Escalabilidad horizontal</li>
                        <li>IntegraciÃ³n perfecta con Node.js</li>
                        <li>Queries potentes</li>
                        <li>Atlas (cloud) gratis para empezar</li>
                    </ul>
                    <p><strong>Ideal para:</strong> Apps modernas, prototipado rÃ¡pido, datos semi-estructurados</p>
                    <p><strong>Usado por:</strong> Uber, Airbnb, eBay</p>
                </div>

                <div class="db-card">
                    <span class="db-tag redis">Redis</span>
                    <h4>NoSQL: In-Memory Key-Value Store</h4>
                    <p><strong>Tipo:</strong> NoSQL Key-Value</p>
                    <p><strong>Ventajas:</strong></p>
                    <ul>
                        <li>ULTRA RÃPIDO (todo en RAM)</li>
                        <li>Perfect para cachÃ©</li>
                        <li>Sesiones de usuario</li>
                        <li>Rate limiting, leaderboards</li>
                        <li>Pub/Sub para real-time</li>
                    </ul>
                    <p><strong>Ideal para:</strong> CachÃ©, sesiones, real-time, queues</p>
                    <p><strong>Usado por:</strong> Twitter, GitHub, Snapchat</p>
                </div>
            </div>

            <div class="tip">
                <strong>ğŸ’¡ RecomendaciÃ³n para empezar:</strong>
                <br><br><strong>PostgreSQL</strong> si quieres aprender SQL (la habilidad mÃ¡s valiosa)
                <br><strong>MongoDB</strong> si vienes de JavaScript y quieres prototipado rÃ¡pido
                <br><br>Eventualmente aprenderÃ¡s ambas. SQL es fundamental para cualquier desarrollador.
            </div>
        </div>

        <div class="section">
            <h2>ConexiÃ³n Backend â†” Base de Datos</h2>

            <div class="diagram">
                <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BACKEND   â”‚                  â”‚  DATABASE   â”‚
â”‚  (Node.js)  â”‚                  â”‚ (PostgreSQL)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                â”‚
       â”‚  1. ConexiÃ³n inicial           â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                â”‚
       â”‚  2. Ejecutar query             â”‚
       â”‚    SELECT * FROM users         â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                â”‚
       â”‚  3. Procesa query, busca datos â”‚
       â”‚                         [DB hace su magia]
       â”‚                                â”‚
       â”‚  4. Retorna resultados         â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚    [{id:1, name:"Juan"}...]    â”‚
       â”‚                                â”‚
       â”‚  5. Backend procesa y          â”‚
       â”‚     responde al frontend       â”‚
       â”‚                                â”‚
                </pre>
            </div>

            <h3>Ejemplo con Node.js + PostgreSQL</h3>

            <div class="code-example">
                <div class="code-header">ConfiguraciÃ³n y conexiÃ³n (usando pg)</div>
                <code>
<span class="comment">// Instalar: npm install pg</span>
<span class="keyword">const</span> { Pool } = <span class="function">require</span>(<span class="string">'pg'</span>);

<span class="comment">// Configurar conexiÃ³n</span>
<span class="keyword">const</span> pool = <span class="keyword">new</span> <span class="function">Pool</span>({
    user: <span class="string">'postgres'</span>,
    host: <span class="string">'localhost'</span>,
    database: <span class="string">'miapp'</span>,
    password: <span class="string">'password'</span>,
    port: <span class="number">5432</span>
});

<span class="comment">// FunciÃ³n para obtener usuarios</span>
<span class="keyword">async function</span> <span class="function">getUsers</span>() {
    <span class="keyword">try</span> {
        <span class="keyword">const</span> result = <span class="keyword">await</span> pool.<span class="function">query</span>(<span class="string">'SELECT * FROM users'</span>);
        <span class="keyword">return</span> result.rows;
    } <span class="keyword">catch</span> (error) {
        console.<span class="function">error</span>(<span class="string">'Error en query:'</span>, error);
        <span class="keyword">throw</span> error;
    }
}

<span class="comment">// FunciÃ³n para crear usuario</span>
<span class="keyword">async function</span> <span class="function">createUser</span>(nombre, email, passwordHash) {
    <span class="keyword">const</span> query = <span class="string">`
        INSERT INTO users (nombre, email, password)
        VALUES ($1, $2, $3)
        RETURNING *
    `</span>;

    <span class="keyword">const</span> values = [nombre, email, passwordHash];

    <span class="keyword">const</span> result = <span class="keyword">await</span> pool.<span class="function">query</span>(query, values);
    <span class="keyword">return</span> result.rows[<span class="number">0</span>];
}

<span class="comment">// Usar en Express API</span>
app.<span class="function">get</span>(<span class="string">'/api/users'</span>, <span class="keyword">async</span> (req, res) => {
    <span class="keyword">try</span> {
        <span class="keyword">const</span> users = <span class="keyword">await</span> <span class="function">getUsers</span>();
        res.<span class="function">json</span>(users);
    } <span class="keyword">catch</span> (error) {
        res.<span class="function">status</span>(<span class="number">500</span>).<span class="function">json</span>({ error: <span class="string">'Error obteniendo usuarios'</span> });
    }
});
                </code>
            </div>

            <h3>Usando ORMs (Object-Relational Mapping)</h3>

            <div class="db-card">
                <h4>Â¿QuÃ© es un ORM?</h4>
                <p>Herramienta que te permite interactuar con la DB usando objetos de JavaScript/Python en lugar de escribir SQL directo.</p>

                <p><strong>Ventajas:</strong></p>
                <ul>
                    <li>CÃ³digo mÃ¡s limpio y legible</li>
                    <li>Previene SQL injection automÃ¡ticamente</li>
                    <li>Migraciones de base de datos</li>
                    <li>Validaciones integradas</li>
                    <li>Cambiar de DB es mÃ¡s fÃ¡cil</li>
                </ul>

                <p><strong>ORMs Populares:</strong></p>
                <ul>
                    <li><strong>Node.js:</strong> Sequelize, Prisma, TypeORM, Mongoose (MongoDB)</li>
                    <li><strong>Python:</strong> SQLAlchemy, Django ORM</li>
                    <li><strong>PHP:</strong> Eloquent (Laravel)</li>
                </ul>
            </div>

            <div class="code-example">
                <div class="code-header">Ejemplo con Prisma (Node.js ORM moderno)</div>
                <code>
<span class="comment">// schema.prisma - Define tus modelos</span>
model User {
    id        Int      @id @default(autoincrement())
    nombre    String
    email     String   @unique
    password  String
    edad      Int?
    posts     Post[]
    createdAt DateTime @default(now())
}

model Post {
    id        Int      @id @default(autoincrement())
    titulo    String
    contenido String
    author    User     @relation(fields: [authorId], references: [id])
    authorId  Int
}

<span class="comment">// Usar en cÃ³digo JavaScript</span>
<span class="keyword">const</span> { PrismaClient } = <span class="function">require</span>(<span class="string">'@prisma/client'</span>);
<span class="keyword">const</span> prisma = <span class="keyword">new</span> <span class="function">PrismaClient</span>();

<span class="comment">// Crear usuario</span>
<span class="keyword">const</span> user = <span class="keyword">await</span> prisma.user.<span class="function">create</span>({
    data: {
        nombre: <span class="string">'Juan'</span>,
        email: <span class="string">'juan@example.com'</span>,
        password: hashedPassword
    }
});

<span class="comment">// Obtener usuarios con sus posts</span>
<span class="keyword">const</span> users = <span class="keyword">await</span> prisma.user.<span class="function">findMany</span>({
    include: { posts: <span class="keyword">true</span> },
    where: { edad: { gte: <span class="number">25</span> } }
});

<span class="comment">// Actualizar</span>
<span class="keyword">await</span> prisma.user.<span class="function">update</span>({
    where: { id: <span class="number">1</span> },
    data: { edad: <span class="number">29</span> }
});

<span class="comment">// Eliminar</span>
<span class="keyword">await</span> prisma.user.<span class="function">delete</span>({ where: { id: <span class="number">1</span> } });
                </code>
            </div>

            <div class="tip">
                <strong>ğŸ’¡ Â¿ORM o SQL directo?</strong>
                <br><br><strong>Aprende SQL primero</strong> - Es fundamental entender quÃ© sucede detrÃ¡s
                <br><strong>Usa ORMs en producciÃ³n</strong> - Son mÃ¡s seguros y productivos
                <br><br>Los mejores desarrolladores saben ambos y eligen segÃºn el caso.
            </div>
        </div>

        <div class="section">
            <h2>Mejores PrÃ¡cticas</h2>

            <div class="best-practice">
                <strong>âœ… NormalizaciÃ³n:</strong> En SQL, evita redundancia dividiendo datos en tablas relacionadas
            </div>

            <div class="best-practice">
                <strong>âœ… Ãndices:</strong> Crea Ã­ndices en columnas usadas frecuentemente en WHERE y JOINs
            </div>

            <div class="best-practice">
                <strong>âœ… PrevenciÃ³n SQL Injection:</strong> USA SIEMPRE prepared statements o ORMs, NUNCA concatenes strings
            </div>

            <div class="best-practice">
                <strong>âœ… Backups:</strong> Automatiza backups diarios de tu base de datos
            </div>

            <div class="best-practice">
                <strong>âœ… Migraciones:</strong> Versiona cambios de esquema con migration files
            </div>

            <div class="best-practice">
                <strong>âœ… Connection Pooling:</strong> Reutiliza conexiones en lugar de abrir/cerrar constantemente
            </div>

            <div class="warning">
                <strong>âš ï¸ NUNCA:</strong>
                <br>â€¢ Guardar passwords en texto plano
                <br>â€¢ Concatenar input del usuario en queries SQL (SQL injection)
                <br>â€¢ Hardcodear credenciales de DB en el cÃ³digo
                <br>â€¢ Usar SELECT * en producciÃ³n (especifica columnas)
                <br>â€¢ Ignorar Ã­ndices en tablas grandes
            </div>
        </div>

        <div class="section">
            <h2>El Flujo Completo: DiseÃ±o â†’ Frontend â†’ Backend â†’ Database</h2>

            <div class="diagram">
                <pre>
EJEMPLO: Usuario se registra en una aplicaciÃ³n

1. DISEÃ‘O
   â””â”€> Mockup del formulario de registro en Figma

2. FRONTEND (React)
   â”œâ”€> Usuario llena formulario (nombre, email, password)
   â”œâ”€> ValidaciÃ³n bÃ¡sica (email vÃ¡lido, password > 8 chars)
   â””â”€> Click en "Registrarse"
       â”‚
       â””â”€> fetch('https://api.miapp.com/register', {
             method: 'POST',
             body: JSON.stringify({ nombre, email, password })
           })

3. BACKEND (Node.js + Express)
   â”œâ”€> Recibe request POST /register
   â”œâ”€> Valida datos (email Ãºnico, formato correcto)
   â”œâ”€> Hashea password con bcrypt
   â”œâ”€> Genera ID Ãºnico
   â””â”€> Llama a la base de datos
       â”‚
       â””â”€> await prisma.user.create({
             data: { nombre, email, password: hashedPassword }
           })

4. DATABASE (PostgreSQL)
   â”œâ”€> Recibe comando INSERT INTO users (...)
   â”œâ”€> Verifica constraint UNIQUE en email
   â”œâ”€> Guarda registro en disco
   â”œâ”€> Genera timestamp created_at
   â””â”€> Confirma: "âœ… Registro guardado con ID: 123"
       â”‚
       â”‚ [Respuesta inversa]
       â”‚
5. BACKEND recibe confirmaciÃ³n
   â””â”€> Genera token JWT
   â””â”€> Responde al FRONTEND
       â”‚
       â””â”€> { success: true, token: "eyJhbGc...", user: {...} }

6. FRONTEND recibe respuesta
   â”œâ”€> Guarda token en localStorage
   â”œâ”€> Muestra mensaje "Â¡Registro exitoso!"
   â””â”€> Redirige a /dashboard

DATOS PERSISTEN: Usuario puede cerrar navegador, apagar computadora,
                 y cuando vuelva a iniciar sesiÃ³n, sus datos SIGUEN AHÃ
                 porque estÃ¡n en la BASE DE DATOS.
                </pre>
            </div>
        </div>

        <div class="resources">
            <h3>ğŸ“š Recursos Recomendados</h3>
            <ul>
                <li><strong>SQL:</strong>
                    <ul>
                        <li><a href="https://www.postgresql.org/docs/" target="_blank">PostgreSQL Official Docs</a></li>
                        <li><a href="https://www.sqlbolt.com/" target="_blank">SQLBolt</a> - Tutorial interactivo</li>
                        <li><a href="https://www.db-fiddle.com/" target="_blank">DB Fiddle</a> - Playground SQL online</li>
                        <li><a href="https://use-the-index-luke.com/" target="_blank">Use The Index, Luke</a> - Performance SQL</li>
                    </ul>
                </li>
                <li><strong>MongoDB:</strong>
                    <ul>
                        <li><a href="https://www.mongodb.com/docs/" target="_blank">MongoDB Official Docs</a></li>
                        <li><a href="https://university.mongodb.com/" target="_blank">MongoDB University</a> - Cursos gratis</li>
                    </ul>
                </li>
                <li><strong>ORMs:</strong>
                    <ul>
                        <li><a href="https://www.prisma.io/docs" target="_blank">Prisma Docs</a> - ORM moderno</li>
                        <li><a href="https://sequelize.org/" target="_blank">Sequelize</a> - ORM para SQL</li>
                        <li><a href="https://mongoosejs.com/" target="_blank">Mongoose</a> - ODM para MongoDB</li>
                    </ul>
                </li>
                <li><strong>Cursos:</strong>
                    <ul>
                        <li>freeCodeCamp - Relational Database Certification</li>
                        <li>Stanford DB Course (YouTube)</li>
                        <li>Udemy - SQL Bootcamp</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="highlight-box" style="margin-top: 40px;">
            <h4>ğŸ“ Has completado el recorrido completo:</h4>
            <ol>
                <li><strong>DiseÃ±o:</strong> PlanificaciÃ³n visual y UX/UI</li>
                <li><strong>Frontend:</strong> Lo que el usuario ve (HTML/CSS/JS)</li>
                <li><strong>Backend:</strong> La lÃ³gica del servidor (Node.js/Python)</li>
                <li><strong>Base de Datos:</strong> Almacenamiento permanente (SQL/NoSQL)</li>
            </ol>
            <p style="margin-top: 20px;">
                Con estos <strong>4 pilares</strong> puedes construir aplicaciones web completas de principio a fin. Ahora es momento de practicar con proyectos reales integrando todo lo aprendido.
            </p>
        </div>

        <a href="../index.html" class="back-button">â† Volver a Fundamentos</a>
    </div>

    <!-- Sidebar Component -->
    <script src="/sidebar-component.js"></script>

    <!-- TOC Component -->
    <script src="/toc-component.js"></script>
</body>
</html>